---
import i18n from "i18next";
---

<script is:inline define:vars={{ i18n }}>
  const redirectLang = (path) =>
    i18n.languages.some((lang) => path.startsWith(`/${lang}`))
      ? undefined
      : `/${i18n.language}${path}`;

  const newPath = redirectLang(location.pathname);
  if (newPath) {
    location.href = newPath;
  }
</script>
