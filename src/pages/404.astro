---
import { t } from "i18next";
import { redirectLang, updateLang } from "../routing/lang";
import { buildLink } from "../routing/buildLink";
import Button from "../components/Button.astro";
import Layout from "../layouts/Layout.astro";

updateLang(Astro.url.pathname);
const newPath = redirectLang(Astro.url.pathname);
---

{
  newPath || (
    <Layout title="404">
      <div class="p-10 w-1/2 mx-auto grid grid-cols-2 text-center justify-items-center">
        <h1 class="col-span-2 text-4xl font-bold text-wsg-orange-500">404</h1>
        <h2 class="col-span-2 mt-10 text-2xl">{t("errors.404.title")}</h2>
        <Button onclick={`window.location.href = ${buildLink("/")}`}>
          {t("errors.404.toHome")}
        </Button>
        <Button onclick="history.back()" set:html={t("errors.404.back")} />
      </div>
    </Layout>
  )
}
<script is:inline define:vars={{ newPath }}>
  if (newPath) {
    window.location.href = newPath;
  }
</script>
