---
import i18n, { t } from "i18next";
import { buildLink } from "../routing/buildLink";
import { pathWithoutLanguage } from "../routing/lang";
import Dropdown from "./Dropdown.astro";

interface NavigationItem {
  name: string;
  href: string;
}
const navigation: NavigationItem[] = [
  {
    name: t("layout.header.home"),
    href: buildLink("/"),
  },
  {
    name: "Skill 08",
    href: buildLink("skill08"),
  },
  {
    name: "Skill 09",
    href: buildLink("skill09"),
  },
];

const pathWithoutLang = pathWithoutLanguage(Astro.url.pathname);
---

<header class="bg-wsg-orange-500 shadow">
  <nav class="mx-auto max-w-7xl px-6 lg:px-8" aria-label="Top">
    <div
      class="flex w-full items-center justify-between border-b border-white py-6 lg:border-none"
    >
      <div class="flex items-center">
        <a href={buildLink("/")}>
          <img class="h-10 w-auto" src="/img/wsg_hands.svg" alt="" />
        </a>
        <div class="ml-10 hidden space-x-8 lg:block">
          {
            navigation.map((it) => (
              <a
                href={it.href}
                class="text-base font-medium text-white hover:text-gray-100"
              >
                {it.name}
              </a>
            ))
          }
        </div>
      </div>
      <div>
        <Dropdown
          item={i18n.language.toUpperCase()}
          options={i18n.languages.map((lang) => lang.toUpperCase())}
          onOptionClick={(option) =>
            `location.href = '/${option.toLowerCase()}${pathWithoutLang}'`}
        />
      </div>
    </div>
    <div class="flex flex-wrap justify-center gap-x-6 py-4 lg:hidden">
      {
        navigation.map((it) => (
          <a
            href={it.href}
            class="text-base font-medium text-white hover:text-gray-100"
          >
            {it.name}
          </a>
        ))
      }
    </div>
  </nav>
</header>
